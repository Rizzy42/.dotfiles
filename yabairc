# Scripting Addition

yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"
sudo yabai --load-sa

# Global Settings
yabai -m config focus_follows_mouse autoraise

yabai -m config window_border                on
yabai -m config active_window_border_color   0xff89b4fa
yabai -m config window_border_width          2
yabai -m window_border_hidpi                 true


# Window Settings
yabai -m config layout                       bsp

yabai -m config top_padding                  10
yabai -m config bottom_padding               10
yabai -m config left_padding                 10
yabai -m config right_padding                10
yabai -m config window_gap                   10

# Mouse settings
yabai -m config mouse_modifier alt

yabai -m config mouse_action1 move
yabai -m config mouse_action2 resize

# Desktops

function setup_space {
  local idx="$1"
  local name="$2"
  local space=
  echo "setup space $idx : $name"

  space=$(yabai -m query --spaces --space "$idx")
  if [ -z "$space" ]; then
    yabai -m space --create
  fi

  yabai -m space "$idx" --label "$name"
}

setup_space other
setup_space media
setup_space scratchpad

for idx in $(yabai -m query --spaces | jq '.[].index | select(. > 4)' | sort -nr); do
  yabai -m space --destroy "$idx"
done

yabai -m config --space 4 layout float



# Desktop Rules
yabai -m rule --add app=Spotify space=3

# Appearance

yabai -m config window_shadow off
yabai -m config status_bar                   off

# Opacity
yabai -m config window_opacity 				 on
yabai -m config window_opacity_duration      0.0
yabai -m config active_window_opacity        1.0
yabai -m config normal_window_opacity        0.6

# Animation

yabai -m config window_animation_duration    0.1
yabai -m config window_animation_frame_rate  120
yabai -m config window_opacity_duration      0.2